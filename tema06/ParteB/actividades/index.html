<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <script>
      function menu() {
        var cesta = [];
        var articulo = {};
        while (n1 != 5) {
          var n1 = Number(
            prompt(
              "Elige una opción: \n 1.Ver cesta \n 2.Insertar un artículo \n 3.Borrar un artículo \n 4.Vaciar cesta \n 5.Salir"
            )
          );
          var figura;
          var valor1;
          switch (n1) {
            case 1:
              verCesta(cesta);
              break;
            case 2:
              insertarArticulo(articulo, cesta);
              break;
            case 3:
              borrarArticulo(cesta);
              break;
            case 4:
              vaciarCesta(cesta);
              break;
            case 5:
              return;
            default:
              alert("Por favor introduzca un número del 1 al 5");
              break;
          }
        }
      }

      function verCesta(cesta) {
        var total = 0;
        var subtotal = 0;
        var header = "Cod.     Articulo    Precio    Cantidad    Subtotal \n -------------------------------------------------- \n";
        for (var i = 0; i < cesta.length; i++) {
            if (cesta[i].codigo == 0) {
                subtotal = 0;
            } else {
               header =
                header +
                [cesta[i].codigo + "              "] +
                [cesta[i].art + "             "] +
                [cesta[i].precio + "                "] +
                [cesta[i].cantidad + "                 "] +
                [subtotal = (cesta[i].precio * cesta[i].cantidad ) ]+ "\n";
            }
          
          total = total + subtotal;
        }
        alert(header + '\n -------------------------------------------------- \n              TOTAL: '+ total);
      }

      function insertarArticulo(articulo, cesta) {
        var articulo = {
          codigo: Number(cesta.length) + 1,
          art: prompt("Introduzca el articulo"),
          precio: Number(prompt("Introduzca el precio del artículo")),
          cantidad: Number(prompt("Introduzca la cantidad de artículos")),
        };
        meterEnCesta(articulo, cesta);
      }

      function meterEnCesta(articulo, cesta) {
        cesta.push(articulo);
        return cesta;
      }

      function borrarArticulo(cesta) {
        var codigoEliminar = Number(prompt(
          "¿Cual es el codigo del producto que desea eliminar?"
        ));
        for (var i = 0; i < cesta.length; i++) {
          if (cesta[i].codigo === codigoEliminar) {
            cesta[i].codigo = 0;
          }
        }
      }

      function vaciarCesta(cesta) {
        cesta.length = 0;
        return cesta;
      }
    </script>
  </head>
  <body onload="menu();"></body>
</html>