<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <script>
      class Articulo {
        #art = {};
        constructor(codi, nombre, precio, cantidad) {
          this.#art.codigo = codi;
          this.#art.nombre = nombre;
          this.#art.precio = precio;
          this.#art.cantidad = cantidad;
          this.#art.subtotal = precio * cantidad;
          return this.#art;
        }
      }

      class Cesta {
        #cod = 0;
        #articulos = [];

        añadirArticulo() {
          this.#cod++;
          var codigo = this.#cod;
          var nombre = prompt("Introduzca el articulo");
          var precio = Number(prompt("Introduzca el precio del artículo"));
          var cantidad = Number(prompt("Introduzca la cantidad de artículos"));
          var art = new Articulo(codigo, nombre, precio, cantidad);
          this.#articulos.push(art);
        }

        #verCesta() {
          var total = 0;
          var subtotal = 0;
          var header =
            "Cod.     Articulo    Precio    Cantidad    Subtotal \n -------------------------------------------------- \n";
          for (var i = 0; i < this.#articulos.length; i++) {
            if (this.#articulos[i].codigo == 0) {
              subtotal = 0;
            } else {
              header +=
                this.#articulos[i].codigo +
                "              " +
                this.#articulos[i].nombre +
                "             " +
                this.#articulos[i].precio +
                "                " +
                this.#articulos[i].cantidad +
                "                 " +
                this.#articulos[i].subtotal +
                "\n";
            }
            total += this.#articulos[i].subtotal;
          }
          alert(
            header +
              "\n -------------------------------------------------- \n              TOTAL: " +
              total
          );
        }

        borrarArticulo() {
          var codigoEliminar = Number(
            prompt("¿Cual es el codigo del producto que desea eliminar?")
          );
          for (var i = 0; i < this.#articulos.length; i++) {
            if (this.#articulos[i].codigo === codigoEliminar) {
              this.#articulos[i].codigo = 0;
              this.#articulos[i].subtotal = 0;
            }
          }
        }

        vaciarCesta() {
          this.#articulos.length = 0;
        }


        menu() {
          while (n1 != 5) {
            var n1 = Number(
              prompt(
                "Elige una opción: \n 1.Ver cesta \n 2.Insertar un artículo \n 3.Borrar un artículo \n 4.Vaciar cesta \n 5.Salir"
              )
            );

            switch (n1) {
              case 1:
                this.#verCesta();
                break;
              case 2:
                this.añadirArticulo();
                break;
              case 3:
                this.borrarArticulo();
                break;
              case 4:
                this.vaciarCesta();
                break;
              case 5:
                return;
              default:
                alert("Por favor introduzca un número del 1 al 5");
                break;
            }
          }
        }
      }
      var cesta = new Cesta();
      cesta.menu();

    </script>
  </head>
  <body></body>
</html>

