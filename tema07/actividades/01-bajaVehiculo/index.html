<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Baja de Vehiculos</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    /> 
    

    <style type="text/css">
      input:invalid {
        border: 1px solid red;
      }
      input:valid {
        border: 1px solid green;
      }
    </style>
   
    <script>
      class Vehiculo {
        #modificaDNI() {
          var modDni = (document.getElementById("textoDNI").innerHTML =
            "Escribiendo DNI....");
        }

        #resetDNI() {
          var texDni = (document.getElementById("textoDNI").innerHTML =
            "DNI:");
        }

        #validarMatricula() {
          var matric = document.getElementById("matricula");
          if (matric.validity.patternMismatch) {
            matric.setCustomValidity(
              "Por favor, introduzca una matrícula formada por 4 números y 3 letras mayúsculas"
            );
          } else {
            matric.setCustomValidity("");
          }
        }

        #validaDNI() {
          var dni = document.getElementById("DNI");
          if (dni.validity.patternMismatch) {
            dni.setCustomValidity(
                "Por favor, introduzca un DNI formada por 8 números y 1 letra mayúsculas"
            );
          } else {
            dni.setCustomValidity("");
          }
        }

        fEvento() {
          var matric = document.getElementById("matricula");
          matric.addEventListener("keyup", this.#validarMatricula.bind(this));

          var texDni = document.getElementById("DNI");
          texDni.addEventListener("focus", this.#modificaDNI.bind(this));
          texDni.addEventListener("blur", this.#resetDNI.bind(this));

          var dni = document.getElementById("DNI");
          dni.addEventListener("keyup", this.#validaDNI.bind(this));
        }
      }
      

       var eventos = new Vehiculo();
       window.onload = function() {
        eventos.fEvento();
      }
    </script>
  </head>
  <body>
    <form id="form1" method="GET" class="was-validated">
      <div class="container text-left">
        <h1>Solicitud de baja de vehículos</h1>
        <br />
        <div class="row align-items-start">
          <h3>Datos del vehículo:</h3>
          <div class="col">
            <label class="form-label">Matrícula:</label>
            <input
              type="text"
              id="matricula"
              name="matricula"
              class="form-control"
              pattern="^[0-9]{4}[A-Z]{3}$"
              required
            />
          </div>

          <div class="col">
            <label class="form-label">Fecha Matriculación:</label>
            <input
              type="date"
              name="fechaMatric"
              class="form-control"
              required
            />
          </div>

          <div class="col-sm-6">
            <label class="form-label">6 últimos dígitos (nº bastidor):</label>
            <input
              type="text"
              name="numBastidor"
              class="form-control"
              size="6"
              maxlength="6"
              pattern="[0-9]{6}"
              required
            />
          </div>

        </div>

        <br />

        <div class="row align-items-start">
          <h3>Datos del titular:</h3>
          <div class="col">
            <label class="form-label">Nombre:</label>
            <input 
              type="text" 
              name="nombre" 
              class="form-control" 
              required />
          </div>

          <div class="col">
            <label class="form-label">Apellidos:</label>
            <input 
              type="text" 
              class="form-control" 
              name="apellidos" 
              required />
          </div>

          <div class="col-sm-6">
            <label class="form-label">Domicilio:</label>
            <input 
              type="text" 
              name="domicilio" 
              class="form-control"
              required />
          </div>

        </div>

        <br />

        <div class="row align-items-start">
          <div class="col">
            <label class="form-label" id="textoDNI">DNI:</label>
            <input
              type="text"
              class="form-control"
              pattern="^[0-9]{8}[TRWAGMYFPDXBNJZSQVHLCKET]$"
              size="9"
              maxlength="9"
              id="DNI"
              name="dni"
              required
            />
          </div>

          <div class="col">
            <label class="form-label">Correo electrónico:</label>
            <input 
              type="email" 
              class="form-control" 
              name="mail" 
              required />
          </div>

          <div class="col">
            <label class="form-label">Tlf:</label>
            <input
              type="text"
              name="telefono"
              class="form-control"
              size="9"
              maxlength="9"
              pattern="[0-9]{9}"
              required
            />
          </div>

          <div class="col">
            <label class="form-label">Tipo de baja:</label>
            <div class="form-check">
              <label class="form-check-label"> Temporal </label>
              <input
                class="form-check-input"
                type="radio"
                name="baja"
                required
              />
            </div>

            <div class="form-check">
              <label class="form-check-label"> Definitiva </label>
              <input
                class="form-check-input"
                type="radio"
                name="baja"
                required
              />
            </div>

          </div>
        </div>
        <br />
        <button type="submit" class="btn btn-primary">Enviar</button>
      </div>
    </form>
  </body>
</html>
